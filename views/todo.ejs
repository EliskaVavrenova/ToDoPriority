<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= todo.title %></title>
</head>
<body>

  <div id="todoDetail">
    <%- include('_todoDetail') %>
  </div>


  <a href="/">ZpÄ›t na seznam</a>
  <script>
    const ws = new WebSocket('ws://localhost:3000')

    ws.addEventListener('message', (ev) => {
      const data = JSON.parse(ev.data)

      if (data.type === 'todoDetail' && data.id == "<%= todo.id %>") {
        const el = document.getElementById('todoDetail')
        el.innerHTML = data.html
      }
    })
  </script>
</body>
</html>
